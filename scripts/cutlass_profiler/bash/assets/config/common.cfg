#======================================
# GPU CONFIGURATION
#======================================
# Target GPU ID
gpu_id=2

# Delay between tests (seconds)
start_delay=5

#======================================
# FREQUENCY SETTINGS
#======================================
# Available frequency points (MHz)
frequency='oob 1305 1500'
# frequency='oob 1830 1500 1305 1005'
# Alternative frequency configurations:
# frequency='1830 1710 1605 1410 1305 1200 1110 1005 900' # H100 freq points
# frequency='510 600 705 810 900 1005 1110 1200 1380 1410'
# frequency='810 900 1005 1110 1200 1260 1305 1350 1395 1410'
# frequency='1410 1380 1305 1200 1110 1005 900 810 705 600 510 405 300 210'

# Command for changing GPU frequency
# 'frequency' word will be replaced with actual value
frequency_cmd="nvidia-smi -i ${gpu_id} -lgc frequency,frequency"

#======================================
# KERNEL TEST PARAMETERS
#======================================

# Kernel configurations to test
# Format: "kernel_name,operation"
kernel_array=(
  "ue4m3xe2m1_ue4m3xe2m1_f32_void_ue4m3xe2m1_256x256x256_4x2x1_0_tnt,block_scaled_gemm",
  "ue8m0xe4m3_ue8m0xe4m3_f32_void_ue8m0xe4m3_256x256x128_4x2x1_0_ttt,block_scaled_gemm",
  "ue8m0xe4m3_ue8m0xe4m3_f32_void_ue8m0xe4m3_256x256x128_4x2x1_0_tnt,block_scaled_gemm",
  "ue8m0xe4m3_ue8m0xe4m3_f32_void_ue8m0xe4m3_256x256x128_4x2x1_0_ntt,block_scaled_gemm",
  "ue8m0xe4m3_ue8m0xe4m3_f32_void_ue8m0xe4m3_256x256x128_4x2x1_0_nnt,block_scaled_gemm",
  "f16_f16_f32_void_f16_256x256x128_4x2x1_0_ttt,gemm",
  "f16_f16_f32_void_f16_256x256x128_4x2x1_0_tnt,gemm",
  "f16_f16_f32_void_f16_256x256x128_4x2x1_0_ntt,gemm",
  "f16_f16_f32_void_f16_256x256x128_4x2x1_0_nnt,gemm",
)

# Profile iterations for each kernel
# Format: "warmup_iterations,profile_iterations"
profile_iterations=(
"500,6000",
)

#======================================
# MONITORING CONFIGURATION
#======================================
# GPU monitoring command
gpu_monitor_cmd="nvidia-smi --id=${gpu_id} --loop-ms=100 -q -a| grep -v -e{Fan,N/A,JPEG,OFA} > nvsmi.csv"

#======================================
# ENVIRONMENT VARIABLES CONFIGURATION
#======================================
export PROBLEM_SHAPE_ARGS="--m=16384 --n=16384 --k=16384"
